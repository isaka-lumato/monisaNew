<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>My Favorites - Monisa</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,200..700,0..1,-50..200" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,200..700,0..1,-50..200" />
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="search.css">
    <link rel="stylesheet" href="favorites.css">
</head>

<body>

    <!-- Top Navigation -->
    <div class="topbar">
        <div class="nav">
            <a class="brand" href="index.html">
                <img src="src\images\logo.png" alt="logo" width="120" height="50">
            </a>

            <nav class="menu" aria-label="Primary">
                <a href="index.html">Shop</a>
                <a href="bestseller.html">Best Sellers</a>
                <div class="nav-item dropdown">
                    <a href="#" class="dropdown-toggle">By Size <span class="material-symbols-rounded"
                            style="font-size:18px">expand_more</span></a>
                    <div class="dropdown-panel mega-menu" role="menu">
                        <div class="mega-inner">
                            <div class="mega-col">
                                <h4 class="mega-heading">Plans by Area (SQM)</h4>
                                <a href="bestseller.html">750+ SQM</a>
                                <a href="bestseller.html">500–750 SQM</a>
                                <a href="bestseller.html">400–500 SQM</a>
                                <a href="bestseller.html">300–400 SQM</a>
                                <a href="bestseller.html">200–300 SQM</a>
                                <a href="bestseller.html">100–200 SQM</a>
                                <a href="bestseller.html">Under 100 SQM</a>
                            </div>
                            <div class="mega-col">
                                <h4 class="mega-heading">Plans by Bedrooms</h4>
                                <a href="bestseller.html">5+ Bedrooms</a>
                                <a href="bestseller.html">4 Bedrooms</a>
                                <a href="bestseller.html">3 Bedrooms</a>
                                <a href="bestseller.html">2 Bedrooms</a>
                                <a href="bestseller.html">1 Bedroom</a>
                            </div>
                            <div class="mega-col">
                                <h4 class="mega-heading">Plans by Floors</h4>
                                <a href="bestseller.html">1 Floor</a>
                                <a href="bestseller.html">2 Floors</a>
                                <a href="bestseller.html">3 Floors</a>
                                <a href="bestseller.html">4+ Floors</a>
                            </div>
                            <div class="mega-thumb">
                                <img src="src/images/placeholderImg2.jpg" alt="Swedish Countryside" />
                                <span class="thumb-label">Swedish Countryside</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="dropdown-toggle">By Style <span class="material-symbols-rounded"
                            style="font-size:18px">expand_more</span></a>
                    <div class="dropdown-panel simple-menu" role="menu">
                        <a href="bestseller.html">Modern House Plans</a>
                        <a href="bestseller.html">Contemporary House Plans</a>
                        <a href="bestseller.html">Bungalow House Plans</a>
                        <a href="bestseller.html">Luxury House Plans</a>
                        <a href="bestseller.html">Rustic House Plans</a>
                        <a href="bestseller.html">Country House Plans</a>
                    </div>
                </div>
                <div class="nav-item dropdown">
                    <a href="#" class="dropdown-toggle">By Budget <span class="material-symbols-rounded"
                            style="font-size:18px">expand_more</span></a>
                    <div class="dropdown-panel simple-menu" role="menu">
                        <a href="bestseller.html">Under $100 Plans</a>
                        <a href="bestseller.html">$100 to $300 Plans</a>
                        <a href="bestseller.html">$300 to $500 Plans</a>
                        <a href="bestseller.html">$500 to $700 Plans</a>
                        <a href="bestseller.html">$700+ Plans</a>
                    </div>
                </div>
                <a href="https://wa.me/255659966930?text=Hi%2C%20I%27m%20interested%20in%20a%20custom%20house%20plan.%20Can%20you%20help%20me%3F" target="_blank" rel="noopener">Custom Plan</a>
                <a href="services.html">Services</a>
            </nav>

            <div class="actions" aria-label="Utilities">
                <a class="icon-btn" href="#" title="Search">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M21 21l-4.2-4.2" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        <circle cx="11" cy="11" r="7" stroke="currentColor" stroke-width="2" />
                    </svg>
                </a>
                <a class="icon-btn" href="favorites.html" title="Favorites">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M12 21s-7-4.4-7-10a4.1 4.1 0 0 1 7-2.8A4.1 4.1 0 0 1 19 11c0 5.6-7 10-7 10Z"
                            stroke="currentColor" stroke-width="2" fill="none" />
                    </svg>
                    <span id="favoritesCount" class="favorites-badge"></span>
                </a>
                <a class="icon-btn" href="#" title="Compare">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M6 20V10M18 20V4M10 20V14M14 20V7" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" />
                    </svg>
                </a>
            </div>
        </div>
    </div>

    <!-- Favorites Page Content -->
    <main class="favorites-page">
        <div class="favorites-header">
            <h1 class="favorites-title">My Favorites</h1>
            <p class="favorites-subtitle">Your saved house plans</p>
        </div>

        <div class="favorites-actions">
            <span class="favorites-count" id="favoritesCountText">0 saved plans</span>
            <button class="clear-all-btn" id="clearAllBtn" style="display: none;">Clear All</button>
        </div>

        <!-- Empty State -->
        <div id="emptyState" class="empty-favorites" style="display: none;">
            <span class="material-symbols-rounded">favorite_border</span>
            <h2>No favorites yet</h2>
            <p>Start adding house plans to your favorites to see them here</p>
            <a href="index.html" class="browse-btn">
                <span>Browse Plans</span>
                <span class="material-symbols-rounded">arrow_forward</span>
            </a>
        </div>

        <!-- Favorites Grid -->
        <div id="favoritesGrid" class="favorites-grid"></div>
    </main>

    <!-- Search Modal -->
    <div id="searchModal" class="search-modal">
        <div class="search-container">
            <div class="search-header">
                <div class="search-input-wrapper">
                    <span class="material-symbols-rounded">search</span>
                    <input type="text" id="searchInput" placeholder="Search house plans by name, style, bedrooms..."
                        autocomplete="off">
                </div>
                <button id="closeSearch" aria-label="Close search">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            <div class="search-filters">
                <span class="filter-label">Quick Filters:</span>
                <button class="quick-filter" data-filter-type="bedrooms" data-filter-value="1">1 Bedroom</button>
                <button class="quick-filter" data-filter-type="bedrooms" data-filter-value="2">2 Bedrooms</button>
                <button class="quick-filter" data-filter-type="bedrooms" data-filter-value="3">3 Bedrooms</button>
                <button class="quick-filter" data-filter-type="bedrooms" data-filter-value="4">4+ Bedrooms</button>
                <button class="quick-filter" data-filter-type="style" data-filter-value="Modern">Modern</button>
                <button class="quick-filter" data-filter-type="style" data-filter-value="Contemporary">Contemporary</button>
                <button class="quick-filter" data-filter-type="style" data-filter-value="Luxury">Luxury</button>
                <button class="quick-filter" data-filter-type="price" data-filter-value="0-200">Under $200</button>
                <button class="quick-filter" data-filter-type="price" data-filter-value="200-500">$200-$500</button>
                <button class="quick-filter" data-filter-type="price" data-filter-value="500-99999">$500+</button>
            </div>
            <div class="search-results-header">
                <span id="resultsCount">0 results</span>
            </div>
            <div id="searchResults" class="search-results"></div>
        </div>
    </div>

    <script src="index.js"></script>
    <script src="search.js"></script>
    <script src="favorites.js"></script>
    <script>
        // Render favorites on page load
        function renderFavorites() {
            const favorites = FavoritesManager.getFavorites();
            const grid = document.getElementById('favoritesGrid');
            const emptyState = document.getElementById('emptyState');
            const countText = document.getElementById('favoritesCountText');
            const clearBtn = document.getElementById('clearAllBtn');

            // Update count
            countText.textContent = `${favorites.length} saved plan${favorites.length !== 1 ? 's' : ''}`;

            if (favorites.length === 0) {
                grid.style.display = 'none';
                emptyState.style.display = 'block';
                clearBtn.style.display = 'none';
            } else {
                grid.style.display = 'grid';
                emptyState.style.display = 'none';
                clearBtn.style.display = 'block';

                // Render cards
                grid.innerHTML = favorites.map(project => `
                    <div class="favorite-card search-result-card">
                        <button class="favorite-btn favorited" data-project='${JSON.stringify(project)}'>
                            <svg viewBox="0 0 24 24">
                                <path d="M12 21s-7-4.4-7-10a4.1 4.1 0 0 1 7-2.8A4.1 4.1 0 0 1 19 11c0 5.6-7 10-7 10Z" />
                            </svg>
                        </button>
                        <a href="houseInfo.html?id=${project.id}" class="search-card-image">
                            <img src="${project.images[0]}" alt="${project.title}">
                            ${project.badge ? `<span class="search-badge">${project.badge}</span>` : ''}
                        </a>
                        <div class="search-card-content">
                            <h4 class="search-card-title">${project.title}</h4>
                            ${project.subtitle ? `<p class="search-card-subtitle">${project.subtitle}</p>` : ''}
                            <div class="search-card-specs">
                                <span><span class="material-symbols-rounded">bed</span> ${project.bedrooms} bed</span>
                                <span><span class="material-symbols-rounded">bathtub</span> ${project.bathrooms} bath</span>
                                <span><span class="material-symbols-rounded">straighten</span> ${project.sizeSqm} m²</span>
                            </div>
                            <div class="search-card-footer">
                                <span class="search-card-price">From $${project.priceFrom.toFixed(2)}</span>
                                <span class="search-card-style">${project.style}</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                // Re-initialize favorite buttons
                initializeFavoriteButtons();
            }
        }

        // Clear all favorites
        document.getElementById('clearAllBtn').addEventListener('click', () => {
            if (confirm('Are you sure you want to remove all favorites?')) {
                localStorage.removeItem('monisa_favorites');
                FavoritesManager.updateFavoritesCount();
                renderFavorites();
            }
        });

        // Initial render
        renderFavorites();
    </script>
</body>

</html>
